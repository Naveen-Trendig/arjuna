
<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Purpose &#8212; Arjuna 1.1.30 documentation</title>
    <link rel="stylesheet" href="_static/flask.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <script id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/doctools.js"></script>
    <script src="_static/language_data.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Introduction" href="logging.html" />
    <link rel="prev" title="Purpose" href="data_ref.html" />
  <script>DOCUMENTATION_OPTIONS.URL_ROOT = './';</script>
   
  </head><body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="logging.html" title="Introduction"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="data_ref.html" title="Purpose"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">Arjuna 1.1.30 documentation</a> &#187;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="purpose">
<span id="l10n"></span><h1>Purpose<a class="headerlink" href="#purpose" title="Permalink to this headline">¶</a></h1>
<p>As a part of automating tests, a test author might need to deal with localization of strings that are used for various purposes.</p>
<p>Arjuna supports Excel based localization data out of the box. These files are automatically loaded when <strong>Arjuna.init()</strong> is called by Arjuna launcher.</p>
</div>
<div class="section" id="locale-enum">
<h1><strong>Locale Enum</strong><a class="headerlink" href="#locale-enum" title="Permalink to this headline">¶</a></h1>
<p>Arjuna associates locale for localization with the Locale enum constant which in turn uses the names from Python.</p>
<p>The default locate is <strong>Locale.EN</strong>. It can be changed in a project configuration as follows:</p>
<div class="highlight-YAML notranslate"><div class="highlight"><pre><span></span><span class="c1"># project.yaml</span>

<span class="l l-Scalar l-Scalar-Plain">arjuna_options</span><span class="p p-Indicator">:</span>
    <span class="l l-Scalar l-Scalar-Plain">l10n.locale</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">hi</span>
</pre></div>
</div>
</div>
<div class="section" id="excel-based-localization">
<h1><strong>Excel based Localization</strong><a class="headerlink" href="#excel-based-localization" title="Permalink to this headline">¶</a></h1>
<div class="section" id="sample-localization-file">
<h2>Sample Localization File<a class="headerlink" href="#sample-localization-file" title="Permalink to this headline">¶</a></h2>
<p>The localization file follows the format of Excel Column Data Reference files.</p>
<p>You place such files in <strong>&lt;Project Root&gt;/l10n/excel</strong> directory. Two reference files can be found in this example project.</p>
<img alt="_images/l10_1.png" src="_images/l10_1.png" />
<p>First column is always the Reference column. The other columns represent the languages mentioned as <strong>Locale</strong> type in column heading.</p>
<p>In the example file, the columns mentions <strong>en</strong> and <strong>hi</strong> which are Locale value for English and Hindi respectively.</p>
<p>For demonstration purpose, 3 English words are provided with corresponding strings in Hindi.</p>
<img alt="_images/l10_2.png" src="_images/l10_2.png" />
<p>The second file <strong>sample2.xls</strong> has the same data except the localized string for <strong>Correct</strong> in Hindi which is different from <strong>sample1.xls</strong>.</p>
</div>
<div class="section" id="the-l-function-for-localization">
<h2>The <strong>L</strong> function for Localization<a class="headerlink" href="#the-l-function-for-localization" title="Permalink to this headline">¶</a></h2>
<p>You can access data references in your test code with Arjuna’s magic <strong>L</strong> function (similar to <strong>C</strong> and <strong>R</strong> functions seen in other features).</p>
<p>It has the following signature. The first argument is the query. <strong>locale</strong>, <strong>bucket</strong> and <strong>strict</strong> are optional arguments.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">L</span><span class="p">(</span><span class="s2">&quot;qual&quot;</span><span class="p">,</span> <span class="n">locale</span><span class="o">=&lt;</span><span class="n">local</span> <span class="n">enum</span> <span class="n">constant</span> <span class="ow">or</span> <span class="n">string</span><span class="o">&gt;</span><span class="p">,</span> <span class="n">bucket</span><span class="o">=&lt;</span><span class="n">bucket_name</span><span class="o">&gt;</span><span class="p">,</span> <span class="n">strict</span><span class="o">=&lt;</span><span class="bp">True</span> <span class="ow">or</span> <span class="bp">False</span><span class="o">&gt;</span><span class="p">)</span>
</pre></div>
</div>
<ul class="simple">
<li><p><strong>L(“Testing”)</strong> localizes the string as per the <strong>ArjunaOption.L10_LOCALE</strong> value in reference configuration. In <strong>project.yaml</strong>, we have set it as <strong>HI</strong>.</p></li>
<li><p>You can also explcitily mention the locale as <strong>Locale.HI</strong>.</p></li>
<li><p>When a name is repeated across multiple localization files (buckets), the last one holds. <strong>L(“Correct”)</strong> will give the value from <strong>sample2</strong> file as it is loaded after <strong>sample1</strong>.</p></li>
<li><p>You can explcitily refer to a bucket by providing the <strong>bucket</strong> argument. Each Excel localization file represents a bucket and its name without the extension is the bucket name.</p></li>
<li><p>You can also provide the bucket name by prefixing it before the reference key, for example <strong>sample1.corr</strong>.</p></li>
<li><p><strong>strict</strong> argument is to switch strict node on or off.</p></li>
</ul>
</div>
</div>
<div class="section" id="json-based-localization">
<h1><strong>JSON Based Localization</strong><a class="headerlink" href="#json-based-localization" title="Permalink to this headline">¶</a></h1>
<div class="section" id="sample-localization-files">
<h2>Sample Localization Files<a class="headerlink" href="#sample-localization-files" title="Permalink to this headline">¶</a></h2>
<p>With JSON format, there is a specific structure expected. The sample files are placed in <strong>&lt;Project Root&gt;/l10n/json</strong> directory.</p>
<p>Following is the sample JSON localization structure:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>json
├── bucket1
│   ├── de-DE.json
│   └── en-GB.json
├── bucket2
│   ├── de-DE.json
│   └── en-GB.json
├── de-DE.json
└── en-GB.json
</pre></div>
</div>
<ol class="arabic simple">
<li><p>Each directory represents a bucket with the name as that of directory. The concept is similar to an Excel file representing a bucket as discussed above.</p></li>
<li><p>The root directory represents the <strong>root</strong> bucket.</p></li>
<li><p>For a given bucket, the localization data for a <strong>Locale</strong> is kept in a file named <strong>&lt;locale&gt;.json</strong>.</p></li>
</ol>
</div>
<div class="section" id="sample-json-content">
<h2>Sample JSON Content<a class="headerlink" href="#sample-json-content" title="Permalink to this headline">¶</a></h2>
<p>Following is the content of one such file in root directory for German localization:</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;address&quot;</span><span class="o">:</span> <span class="p">{</span>
        <span class="s2">&quot;address&quot;</span><span class="o">:</span> <span class="s2">&quot;Adresse&quot;</span><span class="p">,</span>
        <span class="s2">&quot;city&quot;</span><span class="o">:</span> <span class="s2">&quot;Stadt&quot;</span><span class="p">,</span>
        <span class="s2">&quot;coordinates&quot;</span><span class="o">:</span> <span class="s2">&quot;Koordinaten&quot;</span><span class="p">,</span>
        <span class="s2">&quot;country&quot;</span><span class="o">:</span> <span class="s2">&quot;Land&quot;</span><span class="p">,</span>
        <span class="s2">&quot;houseNumber&quot;</span><span class="o">:</span> <span class="s2">&quot;Hausnummer&quot;</span><span class="p">,</span>
        <span class="s2">&quot;latitude&quot;</span><span class="o">:</span> <span class="s2">&quot;Breitengrad&quot;</span><span class="p">,</span>
        <span class="s2">&quot;location&quot;</span><span class="o">:</span> <span class="s2">&quot;Ort&quot;</span><span class="p">,</span>
        <span class="s2">&quot;longitude&quot;</span><span class="o">:</span> <span class="s2">&quot;Längengrad&quot;</span><span class="p">,</span>
        <span class="s2">&quot;postalCode&quot;</span><span class="o">:</span> <span class="s2">&quot;Postleitzahl&quot;</span><span class="p">,</span>
        <span class="s2">&quot;streetName&quot;</span><span class="o">:</span> <span class="s2">&quot;Straße&quot;</span>
    <span class="p">},</span>

    <span class="s2">&quot;shared&quot;</span><span class="o">:</span> <span class="p">{</span>
        <span class="s2">&quot;back&quot;</span><span class="o">:</span> <span class="s2">&quot;zurück&quot;</span><span class="p">,</span>
        <span class="s2">&quot;cancel&quot;</span><span class="o">:</span> <span class="s2">&quot;Abbrechen&quot;</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<ol class="arabic simple">
<li><p>Each JSON path of keys repesents a string to be localized.</p></li>
<li><p>The key names should be kept same across language files.</p></li>
<li><p><strong>Key1.Key2…KeyN</strong> is the flattened syntax to refer a localized string e.g. <strong>address.coordinates</strong></p></li>
</ol>
</div>
<div class="section" id="using-the-l-function-with-json-localizer">
<h2>Using the <strong>L</strong> Function with JSON Localizer<a class="headerlink" href="#using-the-l-function-with-json-localizer" title="Permalink to this headline">¶</a></h2>
<p>Consider the following localization calls:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">L</span><span class="p">(</span><span class="s2">&quot;error.data.lastTransfer&quot;</span><span class="p">,</span> <span class="n">locale</span><span class="o">=</span><span class="n">Locale</span><span class="o">.</span><span class="n">EN_GB</span><span class="p">)</span> <span class="c1"># From global l10n container</span>
<span class="n">L</span><span class="p">(</span><span class="s2">&quot;error.data.lastTransfer&quot;</span><span class="p">,</span> <span class="n">locale</span><span class="o">=</span><span class="n">Locale</span><span class="o">.</span><span class="n">DE_DE</span><span class="p">)</span> <span class="c1"># From global l10n container</span>

<span class="n">L</span><span class="p">(</span><span class="s2">&quot;error.data.lastTransfer&quot;</span><span class="p">,</span> <span class="n">locale</span><span class="o">=</span><span class="n">Locale</span><span class="o">.</span><span class="n">EN_GB</span><span class="p">,</span> <span class="n">bucket</span><span class="o">=</span><span class="s2">&quot;bucket2&quot;</span><span class="p">)</span> <span class="c1"># From bucket2</span>
<span class="n">L</span><span class="p">(</span><span class="s2">&quot;bucket2.error.data.lastTransfer&quot;</span><span class="p">,</span> <span class="n">locale</span><span class="o">=</span><span class="n">Locale</span><span class="o">.</span><span class="n">EN_GB</span><span class="p">)</span> <span class="c1"># From bucket2</span>

<span class="n">L</span><span class="p">(</span><span class="s2">&quot;address.coordinates&quot;</span><span class="p">,</span> <span class="n">locale</span><span class="o">=</span><span class="n">Locale</span><span class="o">.</span><span class="n">EN_GB</span><span class="p">,</span> <span class="n">bucket</span><span class="o">=</span><span class="s2">&quot;bucket2&quot;</span><span class="p">)</span>
<span class="n">L</span><span class="p">(</span><span class="s2">&quot;address.coordinates&quot;</span><span class="p">,</span> <span class="n">locale</span><span class="o">=</span><span class="n">Locale</span><span class="o">.</span><span class="n">EN_GB</span><span class="p">,</span> <span class="n">bucket</span><span class="o">=</span><span class="s2">&quot;root&quot;</span><span class="p">)</span>
<span class="n">L</span><span class="p">(</span><span class="s2">&quot;root.address.coordinates&quot;</span><span class="p">,</span> <span class="n">locale</span><span class="o">=</span><span class="n">Locale</span><span class="o">.</span><span class="n">EN_GB</span><span class="p">)</span>
</pre></div>
</div>
<ol class="arabic simple">
<li><p>Use the flattened key syntax as discussed earlier.</p></li>
<li><p>The key names should be kept same across language files.</p></li>
<li><p><strong>Key1.Key2…KeyN</strong> is the flattened syntax to refer a localized string e.g. <strong>address.coordinates</strong></p></li>
<li><p>Files in root localization directory are available in <strong>root</strong> bucket.</p></li>
</ol>
</div>
</div>
<div class="section" id="strict-vs-non-strict-mode-for-localization">
<h1><strong>Strict vs Non-strict Mode</strong> for Localization<a class="headerlink" href="#strict-vs-non-strict-mode-for-localization" title="Permalink to this headline">¶</a></h1>
<p>By default, Arjuna handles localization in a non-strict mode. This means if localized string is absent for a given reference, it ignores the error and returns the reference as return value.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">L</span><span class="p">(</span><span class="s2">&quot;non_existing&quot;</span><span class="p">)</span>
<span class="n">L</span><span class="p">(</span><span class="s2">&quot;non_existing&quot;</span><span class="p">,</span> <span class="n">strict</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">locale</span><span class="o">=</span><span class="n">Locale</span><span class="o">.</span><span class="n">DE_DE</span><span class="p">)</span>
</pre></div>
</div>
<ol class="arabic simple">
<li><p>As by default the strict mode if off, <strong>L(“non_existing”)</strong> returns <strong>non_existing</strong>.</p></li>
<li><p>You can enforce strict behavior by providing the <strong>strict=True</strong> argument to the <strong>L</strong> function. The second print statement in above code will raise an exception.</p></li>
<li><p>You can switch on strict mode at the project level by including <strong>l10n.strict = True</strong> in the <strong>project.yaml</strong> file.</p></li>
</ol>
</div>


          </div>
        </div>
      </div>
  <span id="sidebar-top"></span>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  
    
  

  <h3>Contents</h3>
  <ul>
<li><a class="reference internal" href="#">Purpose</a></li>
<li><a class="reference internal" href="#locale-enum"><strong>Locale Enum</strong></a></li>
<li><a class="reference internal" href="#excel-based-localization"><strong>Excel based Localization</strong></a><ul>
<li><a class="reference internal" href="#sample-localization-file">Sample Localization File</a></li>
<li><a class="reference internal" href="#the-l-function-for-localization">The <strong>L</strong> function for Localization</a></li>
</ul>
</li>
<li><a class="reference internal" href="#json-based-localization"><strong>JSON Based Localization</strong></a><ul>
<li><a class="reference internal" href="#sample-localization-files">Sample Localization Files</a></li>
<li><a class="reference internal" href="#sample-json-content">Sample JSON Content</a></li>
<li><a class="reference internal" href="#using-the-l-function-with-json-localizer">Using the <strong>L</strong> Function with JSON Localizer</a></li>
</ul>
</li>
<li><a class="reference internal" href="#strict-vs-non-strict-mode-for-localization"><strong>Strict vs Non-strict Mode</strong> for Localization</a></li>
</ul>
<h3>Navigation</h3>
<ul>
  <li><a href="index.html">Overview</a>
    <ul>
          <li>Previous: <a href="data_ref.html" title="previous chapter">Purpose</a>
          <li>Next: <a href="logging.html" title="next chapter">Introduction</a>
    </ul>
  </li>
</ul>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" />
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
  
    <div class="footer" role="contentinfo">
        &#169; Copyright 2015-2020, Rahul Verma.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 2.4.4.
    </div>
  <script src="_static/version_warning_offset.js"></script>

  </body>
</html>