
<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Purpose &#8212; Arjuna 1.1.30 documentation</title>
    <link rel="stylesheet" href="_static/flask.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <script id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/doctools.js"></script>
    <script src="_static/language_data.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Test Selection Rules" href="selection_rules.html" />
    <link rel="prev" title="Understanding Configuration System of Arjuna" href="configuration.html" />
  <script>DOCUMENTATION_OPTIONS.URL_ROOT = './';</script>
   
  </head><body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="selection_rules.html" title="Test Selection Rules"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="configuration.html" title="Understanding Configuration System of Arjuna"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">Arjuna 1.1.30 documentation</a> &#187;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="purpose">
<span id="ddt"></span><h1>Purpose<a class="headerlink" href="#purpose" title="Permalink to this headline">¶</a></h1>
<p>Driving an automated test with data is a critical feature in test automation frameworks.</p>
<p>Here, we will explore various flexible options available in Arjuna for data driven testing.</p>
<p>You can supply <strong>drive_with</strong> argument to the <strong>&#64;test</strong> decorator to instruct Arjuna to associate a <strong>Data Source</strong> with a test. Depending on the needs, as described below, you use Arjuna’s markup for different types of data sources.</p>
</div>
<div class="section" id="single-data-record">
<h1>Single <strong>data record</strong><a class="headerlink" href="#single-data-record" title="Permalink to this headline">¶</a></h1>
<p>Sometimes, the need is simple. You have a single data record, but want to separate it from the test code for the sake of clarity.</p>
<p>This need is solved with the <strong>record</strong> markup of Arjuna. You can provide any number of positional or named arugments.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">arjuna</span> <span class="kn">import</span> <span class="o">*</span>

<span class="nd">@test</span><span class="p">(</span><span class="n">drive_with</span><span class="o">=</span><span class="n">record</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="bp">True</span><span class="p">,</span> <span class="n">a</span><span class="o">=</span><span class="s1">&#39;something&#39;</span><span class="p">,</span> <span class="n">b</span><span class="o">=</span><span class="s1">&#39;anything&#39;</span><span class="p">))</span>
<span class="k">def</span> <span class="nf">check_pos_data</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">data</span><span class="p">):</span>
    <span class="k">pass</span>
</pre></div>
</div>
<ol class="arabic simple">
<li><p>We provide <strong>drive_with</strong> argument to the <strong>&#64;test</strong> decorator.</p></li>
<li><p>To specify a single data record, we call the <strong>record</strong> factory function.</p></li>
<li><p><strong>record</strong> can take any number of positional or keyword arguments.</p></li>
<li><p>The signature of the test now contains a <strong>data</strong> argument.</p></li>
<li><p>Within the body of the tests, you access the positional values using indices (e.g. <strong>data[0]</strong>)</p></li>
<li><p>You can retrieve named values using a dictionary syntax (e.g. <strong>data[‘a’]</strong>) or dot syntax (e.g. <strong>data.a</strong>).</p></li>
<li><p>Names are case-insensitive. <strong>data[‘a’]</strong>, <strong>data[‘A’]</strong>, <strong>data.a</strong> and <strong>data.A</strong> mean the same thing.</p></li>
</ol>
</div>
<div class="section" id="multiple-data-records">
<h1><strong>Multiple Data Records</strong><a class="headerlink" href="#multiple-data-records" title="Permalink to this headline">¶</a></h1>
<p>You use the <strong>records</strong> factory function to provide multiple records. It can contain any number of <strong>record</strong> entries. The test will be repeated as many times as the number of records (2 in this example.)</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">arjuna</span> <span class="kn">import</span> <span class="o">*</span>

<span class="nd">@test</span><span class="p">(</span><span class="n">drive_with</span><span class="o">=</span>
    <span class="n">records</span><span class="p">(</span>
        <span class="n">record</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="nb">sum</span><span class="o">=</span><span class="mi">3</span><span class="p">),</span>
        <span class="n">record</span><span class="p">(</span><span class="mi">4</span><span class="p">,</span><span class="mi">5</span><span class="p">,</span><span class="nb">sum</span><span class="o">=</span><span class="mi">9</span><span class="p">),</span>
    <span class="p">)</span>
<span class="p">)</span>
<span class="k">def</span> <span class="nf">check_records</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">data</span><span class="p">):</span>
    <span class="k">pass</span>
</pre></div>
</div>
<p>The report will contain separate entries for each test. The name will indicate the data used. (e.g. <strong>test/module/check_04_dd_records.py::check_records[Data-&gt; Indexed:[7, 8] Named:{sum=10}]</strong>)</p>
<p>Retrieval of data values is done exactly the same way as in case of a single data record.</p>
</div>
<div class="section" id="driving-with-static-data-function">
<h1>Driving with Static <strong>Data Function</strong><a class="headerlink" href="#driving-with-static-data-function" title="Permalink to this headline">¶</a></h1>
<p>Rather than including static data in Python code, one might want to generate data or pull data from an external service to create data records.</p>
<p>A simple way to achieve this is to write a data function. A static data function always behaves in the same manner.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="nd">@test</span><span class="p">(</span><span class="n">drive_with</span><span class="o">=</span><span class="n">data_function</span><span class="p">(</span><span class="n">func</span><span class="p">))</span>
<span class="k">def</span> <span class="nf">check_static_data_func</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">data</span><span class="p">):</span>
    <span class="k">pass</span>
</pre></div>
</div>
<p>We use <strong>data_function</strong> factory function to associate the data function with the test function Retrieval of values is same as earlier.</p>
</div>
<div class="section" id="driving-with-static-data-generator">
<h1>Driving with Static Data Generator<a class="headerlink" href="#driving-with-static-data-generator" title="Permalink to this headline">¶</a></h1>
<p>You can also use a Python generator instead of a normal function:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="nd">@test</span><span class="p">(</span><span class="n">drive_with</span><span class="o">=</span><span class="n">data_function</span><span class="p">(</span><span class="n">data_generator</span><span class="p">))</span>
<span class="k">def</span> <span class="nf">check_generator_func</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">data</span><span class="p">):</span>
    <span class="k">pass</span>
</pre></div>
</div>
</div>
<div class="section" id="driving-with-dynamic-data-function-or-generator">
<h1>Driving with Dynamic Data Function or Generator<a class="headerlink" href="#driving-with-dynamic-data-function-or-generator" title="Permalink to this headline">¶</a></h1>
<p>Another advanced measure that you can take is creating a data function which acts on the arguments supplied by you to govern the data it returns/generates.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">arjuna</span> <span class="kn">import</span> <span class="o">*</span>

<span class="nd">@test</span><span class="p">(</span><span class="n">drive_with</span><span class="o">=</span><span class="n">data_function</span><span class="p">(</span><span class="n">dynamic_data_func</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="s2">&quot;something&quot;</span><span class="p">,</span> <span class="n">a</span><span class="o">=</span><span class="s2">&quot;whatever&quot;</span><span class="p">,</span> <span class="n">b</span><span class="o">=</span><span class="mi">1</span><span class="p">))</span>
<span class="k">def</span> <span class="nf">check_dynamic_data_func</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">data</span><span class="p">):</span>
    <span class="k">pass</span>
</pre></div>
</div>
<p>Data functions can take any number of arguments - positional as well as named. You supply the arguments in the <strong>data_function</strong> builder function to control the data function.</p>
</div>
<div class="section" id="driving-with-static-data-classes">
<h1>Driving with Static <strong>Data Classes</strong><a class="headerlink" href="#driving-with-static-data-classes" title="Permalink to this headline">¶</a></h1>
<p>Instead of a function, you can also represent your data generation logic as a data class. The Data Class must implement Python’s Iteration Protocol. A static data class always behaves in the same manner.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="nd">@test</span><span class="p">(</span><span class="n">drive_with</span><span class="o">=</span><span class="n">data_class</span><span class="p">(</span><span class="n">MyDataClass</span><span class="p">))</span>
<span class="k">def</span> <span class="nf">check_data_class</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">data</span><span class="p">):</span>
    <span class="k">pass</span>
</pre></div>
</div>
<p>We use <strong>data_class</strong> factory function to associate the data class with the test function. Retrieval of values is same as earlier.</p>
</div>
<div class="section" id="driving-with-dynamic-data-classes">
<h1>Driving with Dynamic Data Classes<a class="headerlink" href="#driving-with-dynamic-data-classes" title="Permalink to this headline">¶</a></h1>
<p>Another advanced measure that you can take is creating a data class which acts on the arguments supplied by you to govern the data it generates.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">arjuna</span> <span class="kn">import</span> <span class="o">*</span>

<span class="nd">@test</span><span class="p">(</span><span class="n">drive_with</span><span class="o">=</span><span class="n">data_class</span><span class="p">(</span><span class="n">MyDataClass</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="s2">&quot;something&quot;</span><span class="p">,</span> <span class="n">a</span><span class="o">=</span><span class="s2">&quot;whatever&quot;</span><span class="p">,</span> <span class="n">b</span><span class="o">=</span><span class="mi">1</span><span class="p">))</span>
<span class="k">def</span> <span class="nf">check_dynamic_data_class</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">data</span><span class="p">):</span>
    <span class="k">pass</span>
</pre></div>
</div>
<p>Data classes can take any number of arguments - positional as well as named. You supply the arguments in the <strong>data_class</strong> factory function to control the data class.</p>
</div>
<div class="section" id="driving-with-data-files">
<h1>Driving with <strong>Data Files</strong><a class="headerlink" href="#driving-with-data-files" title="Permalink to this headline">¶</a></h1>
<p>For large, static data it might be useful to externalize the data completely outside of Python code.</p>
<p>Arjuna supports data externalization in XLS, TSV/CSV and INI files out of the box.</p>
<p>You can use <strong>data_file</strong> factory function to specify a data file. Arjuna determines the loader based on the file extension.</p>
<p>The files are automatically picked up from <strong>Data Sources directory</strong> which is <strong>&lt;Project Root&gt;/data/source</strong>.</p>
<div class="section" id="driving-with-excel-file">
<h2>Driving with Excel File<a class="headerlink" href="#driving-with-excel-file" title="Permalink to this headline">¶</a></h2>
<p>An excel data file (.xls file) can contain data in following format. (.xlsx files are NOT supported as of now)</p>
<img alt="_images/inputxls.png" src="_images/inputxls.png" />
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">arjuna</span> <span class="kn">import</span> <span class="o">*</span>

<span class="nd">@test</span><span class="p">(</span><span class="n">drive_with</span><span class="o">=</span><span class="n">data_file</span><span class="p">(</span><span class="s2">&quot;input.xls&quot;</span><span class="p">))</span>
<span class="k">def</span> <span class="nf">check_drive_with_excel</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">data</span><span class="p">):</span>
    <span class="k">pass</span>
</pre></div>
</div>
</div>
<div class="section" id="driving-with-delimiter-separated-file">
<h2>Driving with Delimiter Separated File<a class="headerlink" href="#driving-with-delimiter-separated-file" title="Permalink to this headline">¶</a></h2>
<p>An delimiter-separated data file can contain data in following format.</p>
<p><strong>.txt</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Left</span> <span class="n">Right</span>   <span class="n">Sum</span>
<span class="mi">1</span>    <span class="mi">2</span>       <span class="mi">3</span>
<span class="mi">4</span>    <span class="mi">5</span>       <span class="mi">8</span>
</pre></div>
</div>
<p><strong>.csv</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Left</span><span class="p">,</span><span class="n">Right</span><span class="p">,</span><span class="n">Sum</span>
<span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span>
<span class="mi">4</span><span class="p">,</span><span class="mi">5</span><span class="p">,</span><span class="mi">8</span>
</pre></div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">arjuna</span> <span class="kn">import</span> <span class="o">*</span>

<span class="nd">@test</span><span class="p">(</span><span class="n">drive_with</span><span class="o">=</span><span class="n">data_file</span><span class="p">(</span><span class="s2">&quot;input.txt&quot;</span><span class="p">))</span>
<span class="k">def</span> <span class="nf">check_drive_with_tsv</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">data</span><span class="p">):</span>
    <span class="k">pass</span>

<span class="nd">@test</span><span class="p">(</span><span class="n">drive_with</span><span class="o">=</span><span class="n">data_file</span><span class="p">(</span><span class="s2">&quot;input.csv&quot;</span><span class="p">,</span> <span class="n">delimiter</span><span class="o">=</span><span class="s2">&quot;,&quot;</span><span class="p">))</span>
<span class="k">def</span> <span class="nf">check_drive_with_csv</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">data</span><span class="p">):</span>
    <span class="k">pass</span>
</pre></div>
</div>
<p>Default delimiter is <strong>tab</strong>. If you use any other delimiter, you can pass it as <strong>delimiter</strong> argument.</p>
</div>
<div class="section" id="driving-with-ini-file">
<h2>Driving with INI File<a class="headerlink" href="#driving-with-ini-file" title="Permalink to this headline">¶</a></h2>
<p>An INI data file can contain data in following format.</p>
<div class="highlight-ini notranslate"><div class="highlight"><pre><span></span><span class="k">[Record 1]</span>
<span class="na">Left</span> <span class="o">=</span> <span class="s">1</span>
<span class="na">Right</span> <span class="o">=</span> <span class="s">2</span>
<span class="na">Sum</span> <span class="o">=</span> <span class="s">3</span>

<span class="k">[Record 2]</span>
<span class="na">Left</span> <span class="o">=</span> <span class="s">4</span>
<span class="na">Right</span> <span class="o">=</span> <span class="s">5</span>
<span class="na">Sum</span> <span class="o">=</span> <span class="s">8</span>
</pre></div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">arjuna</span> <span class="kn">import</span> <span class="o">*</span>

<span class="nd">@test</span><span class="p">(</span><span class="n">drive_with</span><span class="o">=</span><span class="n">data_file</span><span class="p">(</span><span class="s2">&quot;input.ini&quot;</span><span class="p">))</span>
<span class="k">def</span> <span class="nf">check_drive_with_ini</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">data</span><span class="p">):</span>
    <span class="k">pass</span>
</pre></div>
</div>
</div>
<div class="section" id="data-files-with-exclude-filter-for-records">
<h2>Data Files with Exclude Filter for Records<a class="headerlink" href="#data-files-with-exclude-filter-for-records" title="Permalink to this headline">¶</a></h2>
<p>At times, you might want to selectively mark records in data files to be excluded from consideration.</p>
<p>You can do this by adding a column named <strong>exclude</strong> and set it to <strong>y/yes/true</strong> to exclude a record.</p>
<p>For delimiter-separated-files, you can also comment a record by putting a <strong>#</strong> at the beginning.</p>
<p>For INI files, you can also comment a complete record by using <strong>;</strong> which is the commenting symbol for INI files.</p>
</div>
</div>
<div class="section" id="driving-with-multiple-data-sources">
<h1>Driving with <strong>Multiple Data Sources</strong><a class="headerlink" href="#driving-with-multiple-data-sources" title="Permalink to this headline">¶</a></h1>
<p>You can associate multiple data sources with a single test in Arjuna.</p>
<p>We can achieve this by using the <strong>many_data_sources</strong> factory function.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">arjuna</span> <span class="kn">import</span> <span class="o">*</span>

<span class="nd">@test</span><span class="p">(</span><span class="n">drive_with</span><span class="o">=</span><span class="n">many_data_sources</span><span class="p">(</span>
    <span class="n">record</span><span class="p">(</span><span class="n">left</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">right</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="nb">sum</span><span class="o">=</span><span class="mi">3</span><span class="p">),</span>
    <span class="n">records</span><span class="p">(</span>
        <span class="n">record</span><span class="p">(</span><span class="n">left</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span> <span class="n">right</span><span class="o">=</span><span class="mi">4</span><span class="p">,</span> <span class="nb">sum</span><span class="o">=</span><span class="mi">7</span><span class="p">),</span>
        <span class="n">record</span><span class="p">(</span><span class="n">left</span><span class="o">=</span><span class="mi">7</span><span class="p">,</span> <span class="n">right</span><span class="o">=</span><span class="mi">8</span><span class="p">,</span> <span class="nb">sum</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>
    <span class="p">),</span>
    <span class="n">data_function</span><span class="p">(</span><span class="n">myrange</span><span class="p">),</span>
    <span class="n">data_class</span><span class="p">(</span><span class="n">MyDataClass</span><span class="p">),</span>
    <span class="n">data_file</span><span class="p">(</span><span class="s2">&quot;input.xls&quot;</span><span class="p">)</span>
<span class="p">))</span>
<span class="k">def</span> <span class="nf">check_drive_with_many_sources</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">data</span><span class="p">):</span>
    <span class="k">pass</span>
</pre></div>
</div>
<p>The data sources are picked up sequentially with this construct.</p>
</div>


          </div>
        </div>
      </div>
  <span id="sidebar-top"></span>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  
    
  

  <h3>Contents</h3>
  <ul>
<li><a class="reference internal" href="#">Purpose</a></li>
<li><a class="reference internal" href="#single-data-record">Single <strong>data record</strong></a></li>
<li><a class="reference internal" href="#multiple-data-records"><strong>Multiple Data Records</strong></a></li>
<li><a class="reference internal" href="#driving-with-static-data-function">Driving with Static <strong>Data Function</strong></a></li>
<li><a class="reference internal" href="#driving-with-static-data-generator">Driving with Static Data Generator</a></li>
<li><a class="reference internal" href="#driving-with-dynamic-data-function-or-generator">Driving with Dynamic Data Function or Generator</a></li>
<li><a class="reference internal" href="#driving-with-static-data-classes">Driving with Static <strong>Data Classes</strong></a></li>
<li><a class="reference internal" href="#driving-with-dynamic-data-classes">Driving with Dynamic Data Classes</a></li>
<li><a class="reference internal" href="#driving-with-data-files">Driving with <strong>Data Files</strong></a><ul>
<li><a class="reference internal" href="#driving-with-excel-file">Driving with Excel File</a></li>
<li><a class="reference internal" href="#driving-with-delimiter-separated-file">Driving with Delimiter Separated File</a></li>
<li><a class="reference internal" href="#driving-with-ini-file">Driving with INI File</a></li>
<li><a class="reference internal" href="#data-files-with-exclude-filter-for-records">Data Files with Exclude Filter for Records</a></li>
</ul>
</li>
<li><a class="reference internal" href="#driving-with-multiple-data-sources">Driving with <strong>Multiple Data Sources</strong></a></li>
</ul>
<h3>Navigation</h3>
<ul>
  <li><a href="index.html">Overview</a>
    <ul>
          <li>Previous: <a href="configuration.html" title="previous chapter">Understanding Configuration System of Arjuna</a>
          <li>Next: <a href="selection_rules.html" title="next chapter">Test Selection Rules</a>
    </ul>
  </li>
</ul>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" />
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
  
    <div class="footer" role="contentinfo">
        &#169; Copyright 2015-2020, Rahul Verma.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 2.4.4.
    </div>
  <script src="_static/version_warning_offset.js"></script>

  </body>
</html>